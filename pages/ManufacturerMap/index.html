<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royalty Pharma</title>
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    
    <div class="man-map">
        <div class="back">
            <a href="../../index.html">Back</a>
        </div>
        <!-- <div class="globe">
            <canvas width="960" height="600"></cavnas>
        </div> -->
        
        <div class="distribution-map">
            <img src="./map.png" alt="Map">

            <button class="map-point" style="top:46%;left:80%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Ablaze Pharma</h2>
                        <p>Unit 01-02, 17F, New Bund Center, 
                            555 West Haiyang Road, Pudong New Area, 
                            Shanghai 200126
                        </p>
                    </div>
                </div>
            </button>

            <button class="map-point" style="top:38%;left:28%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Adicet Bio</h2>
                        <p>200 Clarendon St, 
                            Floor 6 Suite #6041 Boston, MA 02116
                        </p>
                    </div>
                </div>
            </button>

            <button class="map-point" style="top:32%;left:49%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Janssen Pharmaceuticals</h2>
                        <p>Turnhoutseweg 30, Beerse, Belgium</p>
                    </div>
                </div>
            </button>

            <button class="map-point" style="top:45%;left:15%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Arrowhead Pharmaceuticals</h2>
                        <p>177 East Colorado Boulevard, 
                            Suite 700 Pasadena, CA 9110
                        </p>
                    </div>
                </div>
            </button>

            <button class="map-point" style="top:32%;left:46.5%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Beckley Psytech</h2>
                        <p>Beckley Park Beckley Oxford OX3 9SY England, 
                            United Kingdom
                        </p>
                    </div>
                </div>
            </button>

            <button class="map-point" style="top:40%;left:27%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Bristol-Myers Squibb</h2>
                        <p>430 E. 29th Street, 14th Floor, 
                            New York, NY 10016
                        </p>
                    </div>
                </div>
            </button>

            <button class="map-point" style="top:80%;left:88%">
                <div class="content">
                    <div class="centered-y">
                        <h2>Channel Biologics</h2>
                        <p>Channel Biologics Pty Ltd. 
                            Building 12 41-45 Bourke Rd Alexandria, 
                            2015 NSW Australia
                        </p>
                    </div>
                </div>
            </button>
        </div>
    </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/topojson-client@2"></script>
<script src="./versor.js"></script>

<script>

    var canvas = d3.select("canvas"),
        width = canvas.property("width"),
        height = canvas.property("height"),
        context = canvas.node().getContext("2d");
    
    var projection = d3.geoOrthographic()
        .scale((height - 10) / 2)
        .translate([width / 2, height / 2])
        .precision(0.1);
    
    var path = d3.geoPath()
        .projection(projection)
        .context(context);
    
    canvas.call(d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged));
    
    var render = function() {},
        v0, // Mouse position in Cartesian coordinates at start of drag gesture.
        r0, // Projection rotation as Euler angles at start.
        q0; // Projection rotation as versor at start.
    
    function dragstarted() {
      v0 = versor.cartesian(projection.invert(d3.mouse(this)));
      r0 = projection.rotate();
      q0 = versor(r0);
    }
    
    function dragged() {
      var v1 = versor.cartesian(projection.rotate(r0).invert(d3.mouse(this))),
          q1 = versor.multiply(q0, versor.delta(v0, v1)),
          r1 = versor.rotation(q1);
      projection.rotate(r1);
      render();
    }
    
    d3.json("https://unpkg.com/world-atlas@1/world/110m.json", function(error, world) {
      if (error) throw error;
    
      var sphere = {type: "Sphere"},
          land = topojson.feature(world, world.objects.land);
    
      render = function() {
        context.clearRect(0, 0, width, height);
        context.beginPath(), path(sphere), context.fillStyle = "#fff", context.fill();
        context.beginPath(), path(land), context.fillStyle = "#003366", context.fill();
        context.beginPath(), path(sphere), context.stroke();
      };
    
      render();
    });
    
    </script>
</html>